# 🔄 Git工作流程规范

## 📋 版本控制原则

为了确保代码安全和开发历史清晰，建立以下Git工作流程规范：

## ✅ 提交频率规范

### 🚀 立即提交场景
1. **功能完成**：每完成一个功能模块
2. **重构完成**：每完成一次代码重构
3. **Bug修复**：每修复一个重要问题
4. **配置更改**：package.json、tsconfig等配置文件修改
5. **文档更新**：重要文档的增加或更新

### ⏰ 定期提交场景
1. **工作结束**：每天工作结束前
2. **重要节点**：每个开发阶段完成后
3. **测试通过**：构建和测试验证通过后

## 📝 提交信息规范

### 格式标准
```
<emoji> <类型>: <简短描述>

<详细说明>

<影响范围>
```

### Emoji分类
- 🎉 `:tada:` - 初始化、重大milestone
- ✨ `:sparkles:` - 新功能
- 🐛 `:bug:` - Bug修复
- 🎨 `:art:` - 界面/样式改进
- ⚡ `:zap:` - 性能优化
- 🔧 `:wrench:` - 配置文件修改
- 📝 `:memo:` - 文档更新
- ♻️ `:recycle:` - 代码重构
- 🧹 `:broom:` - 代码清理
- 🔒 `:lock:` - 安全相关

### 提交示例
```bash
# 功能开发
git commit -m "✨ feat: 添加海报模板预览功能

- 新增模板预览组件TemplatePreview
- 支持4种海报类型的模板展示
- 集成模板选择交互逻辑

影响组件: DesignToolbar, AIDesignDialog"

# Bug修复  
git commit -m "🐛 fix: 修复海报下载文件名乱码问题

- 统一使用UTF-8编码处理文件名
- 添加特殊字符过滤逻辑
- 修复中文文件名在不同浏览器的兼容性

影响文件: downloadPoster函数"

# 性能优化
git commit -m "⚡ perf: 优化图片加载性能

- 实施图片懒加载
- 压缩图片资源大小
- 添加加载进度提示

包大小: 1.7MB → 1.2MB (-29%)"
```

## 🛠️ 常用Git命令

### 日常操作
```bash
# 查看状态
git status

# 添加文件
git add .                    # 添加所有文件
git add src/components/      # 添加特定目录
git add *.tsx               # 添加特定类型文件

# 提交变更
git commit -m "提交信息"

# 查看历史
git log --oneline           # 简洁模式
git log --graph            # 图形模式
git log -5                 # 最近5次提交

# 查看差异
git diff                   # 工作区vs暂存区
git diff --cached          # 暂存区vs仓库
git diff HEAD~1           # 与上次提交比较
```

### 分支管理
```bash
# 创建功能分支
git checkout -b feature/新功能名称

# 切换分支
git checkout main
git checkout feature/xxx

# 合并分支
git checkout main
git merge feature/xxx

# 删除分支
git branch -d feature/xxx
```

### 撤销操作
```bash
# 撤销工作区修改
git checkout -- 文件名

# 撤销暂存
git reset HEAD 文件名

# 撤销最近提交（保留修改）
git reset --soft HEAD~1

# 撤销最近提交（丢弃修改）
git reset --hard HEAD~1
```

## 📊 提交检查清单

### 提交前检查 ✅
- [ ] 代码编译无错误
- [ ] 运行`npm run build`成功
- [ ] 核心功能测试通过
- [ ] 删除调试代码和console.log
- [ ] 更新相关文档
- [ ] 提交信息清晰描述

### 提交后验证 ✅
- [ ] 运行`git status`确认干净
- [ ] 运行`git log --oneline`确认提交记录
- [ ] 再次测试核心功能
- [ ] 如有问题立即修复并补充提交

## 🎯 版本控制最佳实践

### 1. 💡 小而频繁的提交
- **优势**：容易回滚、历史清晰、减少冲突
- **原则**：每个提交只关注一个问题
- **频率**：功能完成即提交，不等到最后

### 2. 📝 清晰的提交信息
- **简短描述**：50字符以内的一句话总结
- **详细说明**：如有必要，说明why和how
- **影响范围**：列出影响的主要文件或组件

### 3. 🧪 提交前测试
- **构建测试**：确保代码能正常构建
- **功能测试**：验证核心功能未破坏
- **代码质量**：确保没有明显的代码问题

### 4. 📂 文件组织原则
- **相关变更一起提交**：同一功能的多个文件
- **配置单独提交**：package.json等配置文件
- **文档独立提交**：除非与代码直接相关

## 🔄 当前工作流程

基于项目当前状态，建议采用以下工作流程：

### 开发流程
1. **开始新功能**：创建feature分支（可选）
2. **开发阶段**：频繁小提交
3. **功能完成**：完整测试后提交
4. **合并主分支**：确保功能稳定

### 提交时机
- ✨ 每个组件开发完成
- 🎨 每次UI/UX改进完成  
- 🐛 每个Bug修复完成
- ⚡ 每次性能优化完成
- 📝 重要文档更新

## 📈 版本里程碑

### 已完成 ✅
- **v0.1.0** (090ca61): 项目初始化 + 用户流程重构
  - 文件清理完成
  - UI/UX重构完成
  - 组件化架构建立

### 计划中 🚀
- **v0.2.0**: 性能优化版本
- **v0.3.0**: 功能增强版本
- **v1.0.0**: 正式发布版本

---

**🎯 核心原则**：频繁提交，清晰描述，确保质量，保护进度！

**⚡ 即时行动**：每次重要变更立即`git add . && git commit -m "描述"` 